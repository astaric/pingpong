{% extends 'pingpong/category.html' %}
{% load brackets %}
{% load staticfiles %}

{% block additional_header %}
    <link rel="stylesheet" href="{% static 'css/brackets.css' %}">
    <style>
        .player_group {
            display: inline-block;
            border: 1px solid black;
            vertical-align: top;
            margin: 5px;
            padding: 5px;
            min-width: 150px;
        }

        .player_group ul {
            list-style-type: none;
            -webkit-padding-start: 0;
        }

        .player_group .leader {
            font-weight: bold;
        }
    </style>

    <style media="print">
        .panel {
            page-break-before: always;
        }
    </style>
{% endblock %}

{% block category_content %}
    {% if category.type == category.SINGLE %}
        <div class="groups panel panel-default">
            <div class="panel-body">
                {% regroup group_members by group as group_list %}
                {% for group in group_list %}
                    <div class="player_group">
                        <a href="{% url 'edit_group' category_id=group.grouper.category_id group_id=group.grouper.id %}">{{ group.grouper }}</a>
                        <ul>
                            {% for member in group.list %}
                                <li{% if member.leader %} class="leader"{% endif %}>
                                    {% if member.place %}{{ member.place }}.{% endif %} {{ member }}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}

    {% for bracket in brackets %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">{{ bracket.name }}</h4>
            </div>
            <div class="panel-body">
                {% show_bracket bracket %}
            </div>
        </div>
    {% endfor %}
{% endblock %}

{% load i18n %}
<form method="post" action="{% url 'category_edit_players' category_id=category.id %}">
    {% csrf_token %}
    {% if not panel %}
        <div class="modal-dialog">
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-label">{% trans 'Edit' %} {{ category.description }}
                ({{ category.name }})</h4>
        </div>
        <div class="modal-body">
    {% endif %}

    {{ players_formset.management_form }}
    {{ players_formset.non_form_errors.as_ul }}

    <table id="formset" class="table players">
        {% for form in players_formset.forms %}
            {% if forloop.first %}
                <thead>
                <tr>
                    <th></th>
                    {% for field in form.visible_fields %}
                        <th>{{ field.label|capfirst }}</th>
                    {% endfor %}
                    {% if panel %}
                        <th width="100%"></th>
                    {% endif %}
                </tr>
                </thead>
            {% endif %}
            <tr class="{% cycle row1,row2 %}">
                <td style="text-align: right;">{{ forloop.counter }}.</td>
                {% for field in form.visible_fields %}
                    <td>
                        {% if forloop.first %}
                            {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        {% endif %}
                        {{ field.errors.as_ul }}
                        {{ field }}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
    {% if panel %}
        <div class="panel-footer">
    {% endif %}
    <button name="save" class="btn btn-primary btn-sm" value="yes">{% trans 'Save' %}</button>
    {% if panel %}
        </div>
    {% else %}
        </div>
        </div>
        </div>
    {% endif %}
</form>

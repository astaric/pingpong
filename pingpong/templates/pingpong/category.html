{% extends 'pingpong/base.html' %}
{% load staticfiles %}
{% load i18n %}
{% load categories %}

{% block current_mode %}
    {% trans 'Category' %}
{% endblock %}

{% block navigation_items %}
    {% list_categories category%}
    {% if user.is_authenticated %}
    <li><a href="{% url 'category_add' %}">
        &nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-plus"></i>&nbsp;&nbsp;&nbsp;</a></li>
    {% endif %}
{% endblock %}


{% block additional_header %}
    <link rel="stylesheet" href="{% static 'css/jquery-ui-1.10.3.custom.min.css' %}">
    <style>
        table.players > tbody > tr > td {
            padding: 2px;
        }

        table.players input {
            border: 0;
        }

        .collapsing {
            transition: height 0.01s;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                {% if user.is_authenticated %}
                <a data-toggle="collapse" href="#categoryFields">
                    {{ category.description }} ({{ category.name }})
                </a>
                {% else %}
                    {{ category.description }} ({{ category.name }})
                {% endif %}
            </h4>
        </div>
        {% if user.is_authenticated %}
            {% edit_category category %}
        {% endif %}

        {% block category_content %}
            {% if category.group__count == 0 and category.bracket__count == 0 %}
                {% edit_category_players category %}
            {% else %}
                {% if category.group__count > 0 %}
                    {% show_groups category %}
                {% endif %}

                {% if category.bracket__count > 0 %}
                    {% show_brackets category %}
                {% endif %}
            {% endif %}
        {% endblock %}
    </div>
{% endblock %}

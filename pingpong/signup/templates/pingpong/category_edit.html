{% extends 'pingpong/base.html' %}
{% load staticfiles %}

{% block additional_header %}
    <style>
        table.players > tbody > tr > td {
            padding: 2px;
        }

        table.players input {
            border: 0;
        }
    </style>
{% endblock %}

{% block subnavigation %}
    {% for c in categories %}
        <li{% if c.id == category.id %} class="active"{% endif %}>
            <a href="{% url 'category_edit' id=c.id %}">{{ c }}
                ({{ c.player_count }})</a>
        </li>
    {% endfor %}
    <li><a href="{% url 'category_add' %}"><i class="icon-plus">+</i></a></li>
{% endblock %}

{% block content %}
    <div class="btn-group-vertical pull-right">

    </div>
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div id="common_fields" class="panel-heading">
            {{ form.description }}
            {{ form.name }}
        </div>
        {{ formset.management_form }}
        {{ formset.non_form_errors.as_ul }}

        <table id="formset" class="table players">
            {% for form in formset.forms %}
                {% if forloop.first %}
                    <thead>
                    <tr>
                        {% for field in form.visible_fields %}
                            <th>{{ field.label|capfirst }}</th>
                        {% endfor %}
                        <th width="100%"></th>
                    </tr>
                    </thead>
                {% endif %}
                <tr class="{% cycle row1,row2 %}">
                    {% for field in form.visible_fields %}
                        <td>
                            {# Include the hidden fields in the form #}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
        <div class="panel-footer">
            <input type="submit" name="save" class="btn btn-primary btn-sm" value="Shrani"/>
            <input type="submit" name="delete" class="btn btn-danger btn-sm" value="Izbrisi"/>
        </div>

    </div>
{% endblock %}
